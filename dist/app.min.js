!function(e){function n(i){if(t[i])return t[i].exports;var a=t[i]={exports:{},id:i,loaded:!1};return e[i].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n){"use strict";function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function i(e,n,t){if(void 0===t)document.cookie=e+"="+n+"; expires=Fri, 31 Dec 9999 23:59:59 GMT";else{var i=new Date;i.setTime(i.getTime()+24*t*60*60*1e3),document.cookie=e+"="+n+"; expires="+i.toUTCString()}}function a(e){for(var n=e+"=",t=document.cookie.split(";"),i=0;i<t.length;i+=1){var a=t[i];if(0===a.indexOf(n))return a.substring(n.length,a.length)}return""}var s=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),r=function(){function e(n){t(this,e),this.username=n,this.channelJSON={},this.userJSON={},this.html=""}return s(e,[{key:"getChannelInfo",value:function(){var e=this;return $.ajax({url:"https://api.twitch.tv/kraken/streams/"+e.username,data:{client_id:"9gqb16o5nkdypg2smko1jqmipl2hg0l"},dataType:"jsonp",type:"GET"})}},{key:"getUserInfo",value:function(){var e=this;return $.ajax({url:"https://api.twitch.tv/kraken/users/"+e.username,data:{client_id:"9gqb16o5nkdypg2smko1jqmipl2hg0l"},dataType:"jsonp",type:"GET"})}},{key:"getTwitchData",value:function(){var e=this;return new Promise(function(n,t){Promise.all([e.getChannelInfo(),e.getUserInfo()]).then(function(t){e.channelJSON=t[0],e.userJSON=t[1],e.getHTML(),n(e)}).catch(function(e){t(e)})})}},{key:"getHTML",value:function(){var e=this.channelJSON.stream?"online":"offline",n=this.userJSON.logo||"./img/GlitchIcon_white.png",t="https://www.twitch.tv/"+this.username,i=this.userJSON.display_name||this.username,a=null;return a=null===this.channelJSON.stream?"Offline":void 0===this.channelJSON.stream?this.channelJSON.message:this.channelJSON.stream.channel.game+":"+this.channelJSON.stream.channel.status,this.html='<div class="row stream-row">\n          <div class="col-xs-2 text-center">\n            <a href="'+t+'" target="_blank">\n              <img class="profile-img '+e+'" src="'+n+'" />\n            </a>\n          </div>\n\n          <div class="col-xs-2 col-xs-push-8 text-center icon-vcenter">\n            <i class="delete-icon fa fa-minus-square fa-2x" title="Delete User" aria-hidden="true"></i>\n          </div>\n\n          <div class="col-sm-3 col-xs-8 col-xs-pull-2 text-left text-vcenter">\n            <span class="username">\n              <i class="user-icon fa fa-user fa-lg" title="Username" aria-hidden="true"></i>\n              <a href="'+t+'" target="_blank">\n                '+i+'\n              </a>\n            </span>\n          </div>\n\n          <div class="col-sm-5 col-xs-8 col-xs-pull-2 text-left text-vcenter">\n            <i class="game-icon fa fa-gamepad fa-lg" title="Status" aria-hidden="true"></i>\n            <span class="status">'+a+"</span>\n          </div>\n        </div>",$("#status-block").prepend(this.html),this.html}}]),e}(),o={usernameList:[],channelList:[],twitchDataPromiseList:[],initialize:function(){var e=this;return new Promise(function(n,t){""!==a("usernameList")?e.usernameList=a("usernameList").split(","):(e.usernameList=["ESL_SC2","freecodecamp","jwaynedavidson"],i("usernameList",e.usernameList));var s=!0,o=!1,l=void 0;try{for(var u,c=e.usernameList[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){var h=u.value;e.channelList.push(new r(h))}}catch(e){o=!0,l=e}finally{try{!s&&c.return&&c.return()}finally{if(o)throw l}}return Promise.all(e.channelList.map(function(e){return e.getTwitchData()})).then(function(e){n(e)}).catch(function(e){t(e)}),e})},addUser:function(e){var n=this,t=this;new r(e).getTwitchData().then(function(){t.usernameList.unshift(e),t.channelList.unshift(n)}).catch(function(){window.alert(e+" could not be found on Twitch.tv.")})},removeUser:function(e){var n=this.findUsernameIndex(e),t=this.findChannelIndex(e);n>=0&&this.usernameList.splice(n,1),t>=0&&this.channelList.splice(t,1)},findUsernameIndex:function(e){return this.usernameList.findIndex(function(n){return e.trim().toLowerCase()===n.toLowerCase()})},findChannelIndex:function(e){for(var n=0;n<this.channelList.length;n+=1)if(this.channelList[n].username.toLowerCase()===e.toLowerCase())return n;return null},saveToCookie:function(){return i("usernameList",this.usernameList),this}};$(document).ready(function(){o.initialize().catch(function(e){console.log(e)}),$("#status-block").on("click",".delete-icon",function(){var e=$(this).parent().parent().find("span > a").html();o.removeUser(e),$(this).parent().parent().remove()}),$("#username-form").submit(function(e){var n=document.getElementById("username-input").value;/^[a-zA-Z0-9_]{3,25}$/.test(n)&&o.findUsernameIndex(n)===-1?(o.addUser(n),this.reset(),e.preventDefault()):o.findUsernameIndex(n)!==-1?(window.alert("Username already in your list."),e.preventDefault()):/^[a-zA-Z0-9_]{3,25}$/.test(n)||(window.alert("Invalid Twitch username entered."),e.preventDefault())}),window.addEventListener("beforeunload",function(){o.saveToCookie()},!1)})}]);